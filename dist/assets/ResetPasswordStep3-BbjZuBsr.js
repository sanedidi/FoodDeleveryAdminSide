import{j as s,B as m,a as i}from"./index-DSiRzrbg.js";import{u as f,L as d}from"./lock_open-DO3R0X1-.js";import{B as g,L as j,C as P}from"./LinkPage-B0GGgUPf.js";import{u as k,c as B,A as b}from"./AuthInputPassword-B_mzlYOa.js";import{F as z}from"./index-C0teDyxI.js";import"./useMutation-CqTlZdcE.js";import"./utils-km2FGkQ4.js";import"./clsx-B-dksMZM.js";import"./chunk-DEQZ7DVA-L72d_YGu.js";const C="_title_1rwz8_1",N="_list_1rwz8_10",I="_item_1rwz8_18",L="_numberBlue_1rwz8_30",O="_btnWrapper_1rwz8_55",x={title:C,list:N,item:I,numberBlue:L,btnWrapper:O},R="_remember_1r51m_1",h={remember:R},W=({text:e,name:o,ref:r,register:a=()=>{}})=>s.jsxs(m,{display:"flex",alignItems:"center",children:[s.jsx("input",{className:h.checkbox,type:"checkbox","aria-label":"remember",ref:r,...a(o)}),s.jsx("span",{className:h.remember,children:e})]}),y=()=>{const e=JSON.parse(localStorage.getItem("auth")),o=f(),{register:r,handleSubmit:a,formState:{errors:n},setError:c}=k(),{mutate:w,isPending:_}=B();return{register:r,handleSubmit:a,formState:{errors:n},onSubmit:S=>{var l;w({...S,email:(l=e==null?void 0:e.data)==null?void 0:l.email},{onSuccess:t=>{i.userData=t==null?void 0:t.data,i.data={},i.login(),o({position:"top center",duration:3e3,isClosable:!0,title:"Вы успешно сменили пароль",status:"success"})},onError:t=>{var p,u;c("password",{message:(p=t==null?void 0:t.response)==null?void 0:p.data}),c("confirmPassword",{message:(u=t==null?void 0:t.response)==null?void 0:u.data})}})},isPending:_}},G=()=>{const{onSubmit:e,handleSubmit:o,register:r,isPending:a,formState:{errors:n}}=y();return s.jsxs(m,{children:[s.jsx("h1",{className:x.title,children:"Восстановление пароля"}),s.jsxs(z,{onSubmit:o(e),as:"form",children:[s.jsx(b,{label:"Новый пароль",id:"password",src:d,alt:"lockOpen",placeholder:"Введите новый пароль",register:r,name:"password",error:n.password,required:!0}),s.jsx(b,{label:"Повторите пароль",id:"confirmPassword",src:d,alt:"lockOpen",placeholder:"Повторите пароль",register:r,name:"confirmPassword",error:n.confirmPassword,required:!0}),s.jsx(W,{text:"Нажимая кнопку «Зарегистрироваться», вы даёте согласие на обработку данных"}),s.jsxs(m,{className:x.btnWrapper,children:[s.jsx(g,{height:"60px",text:"Восстановить пароль",isPending:a}),s.jsx(j,{text:"Вернуться назад",to:"/auth/forgotPassword/forgotPasswordStepTwo"})]}),s.jsx(P,{})]})]})};export{G as ResetPasswordStep3};
