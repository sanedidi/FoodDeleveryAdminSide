import{r as o,j as e,B as s,C as O,L as E,y as v,z as T,T as F}from"./index-DSiRzrbg.js";import{A as R,H as z,C as A,R as H,c as W}from"./MainProd-DW19dvKP.js";import{s as S,D as $,E as U,S as q}from"./Categories.module-B_Ij1KM_.js";import{C as G,a as J}from"./chunk-6RTX462E-Cg2hHAqu.js";import{r as N}from"./index-C0teDyxI.js";import{M as K,U as Q,C as V}from"./CustomTable-Bb3MW7ZR.js";import{u as X}from"./useMutation-CqTlZdcE.js";import"./chunk-DEQZ7DVA-L72d_YGu.js";import"./clsx-B-dksMZM.js";import"./utils-km2FGkQ4.js";const Y="_products__wrapper_1s15l_1",Z="_products__pagination_1s15l_9",ee="_products__edit_1s15l_12",te="_orders__tabs_1s15l_17",ae="_orders__tabs_wrapper_1s15l_20",se="_orders__tabs_table_1s15l_27",oe="_orders__tabs_pag_1s15l_30",_={products__wrapper:Y,products__pagination:Z,products__edit:ee,orders__tabs:te,orders__tabs_wrapper:ae,orders__tabs_table:se,orders__tabs_pag:oe},re=()=>{const[p,f]=o.useState([]),[P,y]=o.useState(!1),[u,g]=o.useState(!1),[I,m]=o.useState(null),[r,x]=o.useState(1),[n,c]=o.useState(10),[h,b]=o.useState(0),[C,d]=o.useState(!1),M=()=>y(!1),i=()=>g(!0),j=()=>g(!1),w=async(t=1,a=10,l="")=>{d(!0);const k=await N.get("/catalogs",{params:{page:l.length?null:t,limit:l.length?null:a,search:l}}),B=k.data.Data.catalogs;f(B),b(Math.ceil(k.data.Data.count/a)),d(!1)};o.useEffect(()=>{w(r,n)},[r,n]);const D=t=>X({mutationFn:a=>N.delete(`/catalog/${a}`),...t}),{mutate:L}=D({onSuccess:()=>w()});return{columns:[{title:"No",key:"number",dataIndex:"number",width:50},{title:"Каталог",dataIndex:"name",key:"name",width:120},{title:"Категория",dataIndex:"category_id",key:"category_id",width:120,render:t=>{const a=p.find(l=>l.category_id===t);return a?a.name:""}},{title:e.jsx(s,{style:{margin:"0 auto",width:"max-content"},children:e.jsx(O,{})}),key:"operations",width:50,render:t=>e.jsx(s,{children:e.jsx(K,{MenuBtn:e.jsx("div",{style:{boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)",padding:"0px",background:"transparent"},children:e.jsx(R,{style:{fontWeight:"900",fontSize:"30px",border:"1px solid rgba(231, 231, 231, 1)",borderRadius:"5px",background:"#fff"},color:"#0E73FC"})}),ListMenu:e.jsx(s,{className:S.categories__menu,children:e.jsxs(s,{onClick:()=>{i(),m(t.id)},className:S.categories__menu,children:["Удалить",e.jsx($,{color:"#0E73FC"})]})}),ListMenu1:e.jsxs(E,{to:`/admin/workers/workersEdit/${t.id}`,className:S.categories__menu,children:["Изменить",e.jsx(U,{color:"#0E73FC"})]})})})}],data:p.map((t,a)=>({key:t.id||a,number:(r-1)*n+a+1,...t})),paginationData:{current:r,pageSize:n,totalPages:h},isLoading:C,isOpenModal1:P,onCloseModal1:M,isOpenModal2:u,onCloseModal2:j,setSelectedProductId:m,selectedProductId:I,currentPage:r,setCurrentPage:x,pageSize:n,setPageSize:c,setNewState:({page:t,limit:a,search:l})=>{x(t),c(a),w(t,a,l)},handleDeleteCategory:t=>{L(t)}}},he=()=>{const{columns:p,data:f,handleDeleteCategory:P,isOpenModal2:y,onCloseModal2:u,paginationData:g,selectedProductId:I,setNewState:m,setCurrentPage:r}=re(),{current:x,totalPages:n}=g,[c,h]=v(),b=+c.get("page")||1,C=+c.get("limit")||10,d=c.get("search")||"",M=({selected:i})=>{const j=i+1;h({...c,page:j}),r(j)};return o.useEffect(()=>{m({page:b,limit:C,search:d})},[b,C,d]),e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"Каталог",headerBtn2:e.jsxs(E,{to:"/admin/workers/add/",className:"header_btn1",children:[e.jsx(T,{})," Добавить"]})}),e.jsx(Q,{firstItem:e.jsx(A,{InputPlaceHolder:"Поиск...",onChange:i=>{h({search:i.target.value})},InputIcon:e.jsx(q,{color:"blue"})})}),e.jsx(s,{className:_.orders__tabs,children:e.jsx(s,{className:_.orders__tabs_wrapper,children:e.jsx(s,{className:_.orders__tabs_table,children:e.jsx(V,{columns:p,data:f})})})}),e.jsx(s,{className:_.orders__tabs_pag,children:e.jsx(H,{previousLabel:e.jsx(G,{}),nextLabel:e.jsx(J,{}),breakLabel:"...",breakClassName:"break-me",pageCount:n,forcePage:x-1,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:M,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"activePagination",className:_.products_pag})}),e.jsx(W,{isOpenModal:y,onCloseModal:u,modalTitle:e.jsx(s,{margin:"0 auto",textAlign:"center",width:"max-content",children:e.jsx(F,{})}),modalContent:e.jsx(s,{fontWeight:"600",fontSize:"20px",textAlign:"center",children:"Вы уверены, что хотите удалить этот товар?"}),secondaryBtnText:e.jsx(s,{children:"Нет"}),ModalBtnBgColor:"blue",primaryBtnText:"Да",onPrimaryBtnClick:()=>{P(I),u()}})]})};export{he as Workers,he as default};
