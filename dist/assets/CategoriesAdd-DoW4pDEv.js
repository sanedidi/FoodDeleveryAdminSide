import{r as d,j as e,D as v,U as A,E as b,u as w,F as C,H as y,L,B as s,I as P}from"./index-DSiRzrbg.js";import{s as a}from"./CategoriesAdd.module-B0JfrsHW.js";import{H as S}from"./HeaderBox-CQYMr7hZ.js";import{I as B,H,L as D,C as F,a as R,_ as i}from"./MainProd-DW19dvKP.js";import{r as E}from"./index-C0teDyxI.js";const U=()=>{const u=[{lang:"Русский",icon:e.jsx(v,{})},{lang:"Узбекский",icon:e.jsx(A,{})},{lang:"Англисйский",icon:e.jsx(b,{})}],[h,j]=d.useState(""),[c,m]=d.useState(""),[g,x]=d.useState(null),[l,p]=d.useState(null);return{lang:u,activeLang:h,setActiveLang:j,name:c,setName:m,mainImage:g,setMainImage:x,imagePreview:l,setImagePreview:p}},G=()=>{const{lang:u,activeLang:h,setActiveLang:j,name:c,setName:m,mainImage:g,setMainImage:x,imagePreview:l,setImagePreview:p}=U(),f=w(),I=r=>{const t=r.target.files[0];x(t);const n=new FileReader;n.onload=()=>{p(n.result)},n.readAsDataURL(t)},N=async r=>{r.preventDefault();const t=new FormData,n=localStorage.getItem("restaurant_id");t.append("name",c),t.append("photo",g),t.append("restaurant_id",n);try{const o=await E.post("https://food-delivery-api-n6as.onrender.com/v1/category",t,{headers:{"Content-Type":"multipart/form-data"}});if(o.data&&o.data.errors){const _=o.data.errors;switch(!0){case _.name==="":i.error("Введите название");break;case _.photo===null:i.error("Загрузите фото");break;default:i.error("Ошибка при создании категории")}}else i.success("Категория успешно создана"),f("/admin/categories/")}catch(o){i.error("Ошибка: "+o.message)}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsxs("form",{onSubmit:N,children:[e.jsx(H,{title:e.jsx(S,{path:"/admin/categories",gg:"Категории",hh:"Создать",icon1:e.jsx(C,{}),icon:e.jsx(y,{})}),headerBtn2:e.jsx(L,{to:"/admin/categories",style:{display:"flex",alignItems:"center",color:"red",gap:"10px",border:"1px solid red",padding:"5px",borderRadius:"5px",fontSize:"16px"},children:"Отменить"})}),e.jsxs(s,{className:a.categoriesAdd,children:[e.jsx(s,{className:a.categoriesAdd__underHead,children:e.jsx(s,{className:a.categoriesAdd__text,children:e.jsx("p",{children:"Общие Сведения"})})}),e.jsxs(s,{className:a.categoriesAdd__main_cont,children:[e.jsxs(s,{className:a.categoriesAdd__cont,children:[e.jsx(s,{className:a.categoriesAdd__top,children:e.jsx("h1",{children:"Общие настройки"})}),e.jsxs(s,{className:a.categoriesAdd__bottom,children:[e.jsx(s,{className:a.categoriesAdd__bottom_lang,children:e.jsx(D,{})}),e.jsx(s,{className:a.categoriesAdd__upload_left,children:e.jsxs(s,{className:a.input_box,children:[e.jsxs(s,{className:a["drag-file-area"],children:[e.jsxs("label",{className:a.label,children:[e.jsx("input",{type:"file",className:a["default-file-input"],onChange:I}),e.jsxs("span",{className:a["browse-files-text"],children:[e.jsx(P,{}),"макс размер 4 мб"]})," "]})," "]})," "]})}),e.jsxs(s,{className:a.categoriesAdd__right,children:[e.jsx(F,{type:"text",value:c,InputPlaceHolder:"Название...",onChange:r=>m(r.target.value),placeholder:"Name"}),e.jsx(R,{BgColor:"blue",type:"submit",BtnContent:"Сохранить"})]})]})]}),e.jsx(s,{className:a.preview,children:l&&e.jsx("img",{src:l,alt:"Preview"})})]})]})]})]})};export{G as CategoriesAdd,G as default};
