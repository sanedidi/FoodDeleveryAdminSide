import{b as B,r as n,j as e,L as C}from"./index-DSiRzrbg.js";import{I as P,H as y,C as l,a as E,_ as c}from"./MainProd-DW19dvKP.js";import{r as f}from"./index-C0teDyxI.js";const H="_add_1wfjw_1",S="_add__title_1wfjw_15",F="_add__items_1wfjw_22",q="_add__item_1wfjw_22",D="_add__validate_1wfjw_49",a={add:H,add__title:S,add__items:F,add__item:q,add__validate:D},z=()=>{var j;const{categoryId:o}=B(),[t,v]=n.useState(null),[k,N]=n.useState(!1),[d,m]=n.useState({amount_in_kilo:"",butcher_id:o,calculated_price_per_kilo:0,restaurant_id:""}),[_,p]=n.useState("");n.useEffect(()=>{(async()=>{try{const r=await f.get(`/butcher/${o}`);v(r.data.Data)}catch(r){console.error("Error fetching butcher info:",r),N(!0),c.error("Failed to fetch butcher information")}})()},[o]);const h=s=>{const{name:r,value:u}=s.target;if(r==="amount_in_kilo"){const i=parseFloat(u);isNaN(i)||i<=0?p("Введите положительное число для количества в килограммах"):p("");const g=parseFloat(t.price_per_kilo),w=i*g+parseFloat(t==null?void 0:t.total_sum);m(I=>({...I,amount_in_kilo:u,calculated_price_per_kilo:w}))}else m(i=>({...i,[r]:u}))},x=s=>s.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),b=s=>{if(s.preventDefault(),_){c.error("Пожалуйста, исправьте ошибку ввода");return}f.post("meat_price",{amount_in_kilo:parseFloat(d.amount_in_kilo),butcher_id:d.butcher_id,calculated_price_per_kilo:parseFloat(d.calculated_price_per_kilo)}).then(r=>{c.success("Мясник успешно добавлен!")}).catch(r=>{console.error("Error creating butcher:",r),c.error("Не удалось создать мясника")})};return k?e.jsx("div",{children:"Не удалось загрузить данные. Пожалуйста, попробуйте позже."}):t?e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(y,{title:"Добавить остаток ",headerBtn1:e.jsx(C,{to:"/admin/workers/butcher",style:{display:"flex",alignItems:"center",color:"red",gap:"10px",padding:"5px",borderRadius:"5px",fontSize:"16px",border:"1px solid red"},children:"Отменить"})}),e.jsxs("div",{className:a.add,children:[e.jsx("h2",{className:a.add__title,children:"Сотрудник"}),e.jsxs("div",{className:a.add__item,children:[e.jsx("h2",{children:"Имя сотрудника"}),e.jsx(l,{value:t.full_name,name:"fullName",disabled:!0,InputPlaceHolder:"Имя сотрудника"})]}),e.jsxs("div",{className:a.add__item,children:[e.jsx("h2",{children:"Каталог"}),e.jsx(l,{value:(j=t==null?void 0:t.CatalogData)==null?void 0:j.name,name:"fullName",disabled:!0,InputPlaceHolder:"Каталог"})]}),e.jsxs("div",{className:a.add__items,children:[e.jsxs("div",{className:a.add__item,children:[e.jsx("h2",{children:"Цена товар 1КГ"}),e.jsx(l,{value:t.price_per_kilo,name:"fullName",disabled:!0,InputPlaceHolder:"Цена товар 1КГ"})]}),e.jsxs("div",{className:a.add__item,children:[e.jsx("h2",{children:"Остаток"}),e.jsx(l,{value:x(t==null?void 0:t.total_sum),name:"fullName",disabled:!0,InputPlaceHolder:"Остаток"})]})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:a.add__item,children:[e.jsx("h2",{children:" Добавить товар КГ"}),e.jsx(l,{type:"number",name:"amount_in_kilo",value:d.amount_in_kilo,onChange:h,InputPlaceHolder:"Добавить товар КГ",required:!0}),_&&e.jsx("span",{className:a.error,children:_})]}),e.jsxs("div",{className:a.add__item,children:[e.jsx("h2",{children:"Общий остаток"}),e.jsx(l,{type:"text",name:"calculated_price_per_kilo",value:x(d.calculated_price_per_kilo),onChange:h,InputPlaceHolder:"Общий остаток",required:!0,disabled:!0})]}),e.jsx(E,{type:"submit",BtnContent:"Сохранить",BgColor:"blue"})]})]})]}):e.jsx("div",{children:"Загрузка..."})};export{z as default};
