import{j as e,r as t,B as a,C as K,L as C,w as Q,y as V,z as X}from"./index-DSiRzrbg.js";import{I as Y,S as Z}from"./chunk-5GHCVACV-DBP5xBWI.js";import{C as ee,a as te}from"./chunk-6RTX462E-Cg2hHAqu.js";import{C as se}from"./chunk-BTVB6U66-BfmmzTpC.js";import{A as ae,c as F,I as re,H as oe,C as ne,R as ce}from"./MainProd-DW19dvKP.js";import{r as de}from"./index-C0teDyxI.js";import{M as le,U as ie,C as pe}from"./CustomTable-Bb3MW7ZR.js";import{c as _e}from"./chunk-DEQZ7DVA-L72d_YGu.js";import"./clsx-B-dksMZM.js";var ue=_e({viewBox:"0 0 14 14",path:e.jsx("g",{fill:"currentColor",children:e.jsx("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})})});const ge="_products__wrapper_1fcdz_1",xe="_products__pagination_1fcdz_9",he="_products__edit_1fcdz_12",me="_orders_1fcdz_17",fe="_orders__tabs_1fcdz_20",be="_orders__tabs_wrapper_1fcdz_23",Ce="_orders__tabs_table_1fcdz_31",je="_orders__tabs_pag_1fcdz_34",_={products__wrapper:ge,products__pagination:xe,products__edit:he,orders:me,orders__tabs:fe,orders__tabs_wrapper:be,orders__tabs_table:Ce,orders__tabs_pag:je},Ie=()=>{const[u,z]=t.useState(!1),[g,j]=t.useState(!1),[I,x]=t.useState(!1),[h,T]=t.useState([]),[S,y]=t.useState(10),[r,m]=t.useState(1),[o,R]=t.useState(10),[f,B]=t.useState(0),[W,O]=t.useState(!1),[n,b]=t.useState(null),[c,d]=t.useState(null);t.useState("");const[l,M]=t.useState(""),[w,P]=t.useState(""),i=()=>z(!1),H=()=>j(!0),U=()=>j(!1),$=()=>x(!0),q=()=>x(!1),N=async(s=1,p=10,J="")=>{var v,L,D,A;O(!0);try{const k=await de.get("/butchers",{params:{page:s,limit:p,search:J}}),E=(L=(v=k.data)==null?void 0:v.Data)==null?void 0:L.butchers;y(Math.ceil(((A=(D=k.data)==null?void 0:D.Data)==null?void 0:A.count)/p)),T(E)}catch{}finally{O(!1)}};t.useEffect(()=>{N(r,o)},[r,o]);const G=[{title:"No",key:"number",dataIndex:"number",width:0},{title:"Сотрудник",key:"full_name",dataIndex:"full_name",width:60},{title:"Каталог",key:"catalog_id",dataIndex:"catalog_id",width:120},{title:"Цена продажи",key:"price_per_kilo",dataIndex:"price_per_kilo",width:0},{title:"Остаток",key:"total_sum",dataIndex:"total_sum",width:120},{title:e.jsx(a,{style:{margin:"0 auto",width:"max-content"},children:e.jsx(K,{})}),key:"operations",width:20,render:s=>e.jsx(a,{children:e.jsx(le,{MenuBtn:e.jsx(a,{boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)",padding:"0px",children:e.jsx(ae,{style:{fontWeight:"900",fontSize:"30px",border:"1px solid rgba(231, 231, 231, 1)",borderRadius:"5px",background:"#fff"},color:"#0E73FC"})}),ListMenu:e.jsxs(C,{to:`/admin/butcher/reminded/${s.id}`,style:{height:"30px",display:"flex",alignItems:"center",fontWeight:"600",fontSize:"12px",width:"100%",gap:"10px"},className:"categories__menu",onClick:()=>{d(s.id)},children:[e.jsx(ue,{color:"green"}),"Добавить Остаток"]}),ListMenu1:e.jsxs(C,{to:"",style:{height:"30px",display:"flex",alignItems:"center",fontWeight:"600",fontSize:"12px",width:"100%",gap:"10px"},onClick:()=>{H(),b(s.id)},children:[e.jsx(Q,{}),"Удалить Остаток"]}),ListMenu3:e.jsxs(C,{to:`${s.id}`,style:{height:"30px",display:"flex",alignItems:"center",fontWeight:"600",fontSize:"12px",width:"100%",gap:"10px"},children:[e.jsx(F,{}),e.jsx(Y,{color:"green"}),"Инфо Остаток"]})})})}];return{data:h==null?void 0:h.map((s,p)=>({key:(s==null?void 0:s.id)||p,number:(r-1)*o+p+1,...s})),paginationData:{current:r,pageSize:o,totalPages:S},columns:G,activeTab:f,setActiveTab:B,onCloseModal2:U,isOpenModal1:u,getOrders:N,onCloseModal1:i,cancelOrderId:n,closeOrderId:c,selectedOrderType:l,setSelectedOrderType:M,onOpenModal4:$,setOrderStatus:P,isOpenModal2:g,isOpenModal4:I,onCloseModal4:q,orderStatus:w}},Be=()=>{const[u,z]=t.useState(null),[g,j]=t.useState(null),{data:I,columns:x,setActiveTab:h,onCloseModal2:T,isOpenModal1:S,paginationData:y,getOrders:r,onCloseModal1:m,cancelOrderId:o,closeOrderId:R,selectedOrderType:f,setSelectedOrderType:B,onOpenModal4:W,setOrderStatus:O}=Ie(),[n,b]=V(),c=+n.get("page")||1,d=+n.get("limit")||10,l=n.get("search")||"",{current:M,totalPages:w}=y;t.useEffect(()=>{r(c,d,l,f,u,g)},[c,d,l,f,u,g]);const P=i=>{b({page:i.selected+1,limit:d,search:l})};return e.jsxs(e.Fragment,{children:[" ",e.jsx(re,{})," ",e.jsx(oe,{title:"Мясник",headerBtn2:e.jsxs(e.Fragment,{children:[" ",e.jsxs(C,{to:"/admin/workers/butcher/butcherAdd",className:"header_btn1",children:[" ",e.jsx(X,{})," Создать заказ"," "]})," "]})})," ",e.jsxs(a,{className:_.orders,children:[" ",e.jsx(ie,{firstItem:e.jsx(ne,{InputIcon:e.jsx(Z,{color:"blue"}),onChange:i=>{b({search:i.target.value})},InputPlaceHolder:"Поиск по имени клиента"})})," ",e.jsxs(a,{className:_.orders__tabs,children:[" ",e.jsxs(a,{className:_.orders__tabs_wrapper,children:[" ",e.jsx(pe,{columns:x,data:I})," "]})," "]})," ",e.jsxs(a,{className:_.orders__tabs_pag,children:[" ",e.jsx(ce,{previousLabel:e.jsx(ee,{}),nextLabel:e.jsx(te,{}),breakLabel:"...",breakClassName:"break-me",pageCount:w,current:M,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:P,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"activePagination",className:_.products_pag,initialPage:c-1})," "]})," "]})," ",e.jsx(F,{isOpenModal:S,onCloseModal:m,modalTitle:e.jsxs(a,{margin:"0 auto",textAlign:"center",width:"max-content",children:[" ",e.jsx(se,{color:"blue",fontSize:"45px"})," "]}),modalContent:e.jsxs(a,{fontWeight:"600",fontSize:"20px",textAlign:"center",children:[" ","Вы точно хотите завершить заказ?"," "]}),secondaryBtnText:e.jsxs(a,{onClick:()=>{m()},children:[" ","Нет"," "]}),primaryBtnText:"Да",onPrimaryBtnClick:()=>{handleEndOrder(),m()},ModalBtnBgColor:"blue"})," "]})};export{Be as Butcher,Be as default};
